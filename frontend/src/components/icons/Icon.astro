---
/**
 * Reusable Lucide-style icon component for Astro.
 * Supports both icon names and legacy emoji aliases.
 */
interface Props {
  name: string;
  size?: number | string;
  class?: string;
  strokeWidth?: number;
  ariaLabel?: string;
}

const icons = {
  // Navigation & UI
  "layout-dashboard":
    "M4 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6z|M14 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2V6z|M4 16a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2z|M14 16a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-2z",
  "layout-grid":
    "M3 3h8v8H3z|M13 3h8v8h-8z|M3 13h8v8H3z|M13 13h8v8h-8z",
  user: "M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z|M12 14a7 7 0 0 0-7 7h14a7 7 0 0 0-7-7z",
  settings:
    "M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 0 0-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 0 0-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z|M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z",
  "log-out": "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4|M16 17l5-5-5-5|M21 12H9",
  "external-link": "M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6|M15 3h6v6|M10 14L21 3",
  plus: "M12 4v16m8-8H4",
  x: "M18 6L6 18|M6 6l12 12",
  "arrow-left": "M15 18l-6-6 6-6|M21 12H9",
  "arrow-right": "M9 18l6-6-6-6|M3 12h12",
  "refresh-cw": "M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3",
  copy: "M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2|M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",

  // Status & State
  "check-circle": "M9 12l2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z",
  check: "M5 13l4 4L19 7",
  "x-circle": "M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z",
  "alert-circle": "M12 8v4m0 4h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z",
  "alert-triangle": "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",
  info: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z",
  loader: "M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83",
  clock: "M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z|M12 6v6l4 2",

  // Devices & Hardware
  monitor: "M20 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z|M8 21h8|M12 17v4",
  laptop: "M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0l1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",
  smartphone: "M17 2H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z|M12 18h.01",

  // Platform
  windows: "M3 5.5L10.5 4.5V11.5H3V5.5zM12 4.3L21 3V11.5H12V4.3zM3 13H10.5V20L3 19V13zM12 13H21V21.5L12 20.2V13z",
  apple: "M16.5 13c0 2.5 2.1 3.3 2.1 3.3s-1.6 4.5-3.7 4.5c-.9 0-1.5-.6-2.6-.6-1.1 0-1.8.6-2.7.6-2 0-3.7-4.2-3.7-7 0-2.9 1.8-4.5 3.6-4.5.9 0 1.8.6 2.4.6.6 0 1.6-.7 2.8-.6.5 0 2 .2 2.9 1.6-.1.1-1.7 1-1.7 3.1z|M14.5 4.5c.6-.7 1-1.6.9-2.5-.9.1-1.9.6-2.5 1.3-.6.6-1.1 1.6-1 2.5 1 .1 2-.5 2.6-1.3z",
  linux: "M12 2c-3.5 0-6 3-6 7 0 2 .5 3.5 1.5 5l-2 3.5c-.5 1 0 2 1 2.5h11c1-.5 1.5-1.5 1-2.5L16 14c1-1.5 1.5-3 1.5-5 0-4-2.5-7-5.5-7zm-2 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm4 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-4 4h4c0 1.5-1 3-2 3s-2-1.5-2-3z",

  // Commerce & Billing
  "credit-card": "M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3z",
  "shopping-cart": "M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-8 2a2 2 0 1 1-4 0 2 2 0 0 1 4 0z",
  ticket: "M15 5v2m0 4v2m0 4v2M5 5a2 2 0 0 0-2 2v3a2 2 0 1 1 0 4v3a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-3a2 2 0 1 1 0-4V7a2 2 0 0 0-2-2H5z",
  coins: "M3 6c0 1.1 2.7 2 6 2s6-.9 6-2-2.7-2-6-2-6 .9-6 2z|M3 12c0 1.1 2.7 2 6 2s6-.9 6-2|M3 18c0 1.1 2.7 2 6 2s6-.9 6-2",

  // Files & Data
  download: "M4 16v1a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4",
  "file-text": "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z|M14 2v6h6|M16 13H8|M16 17H8|M10 9H8",
  key: "M15 7a2 2 0 0 1 2 2m4 0a6 6 0 0 1-7.743 5.743L11 17H9v2H7v2H4a1 1 0 0 1-1-1v-2.586a1 1 0 0 1 .293-.707l5.964-5.964A6 6 0 1 1 21 9z",
  shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
  "shield-check": "M9 12l2 2 4-4|M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",

  // Network & Connection
  wifi: "M5 12.55a11 11 0 0 1 14.08 0|M1.42 9a16 16 0 0 1 21.16 0|M8.53 16.11a6 6 0 0 1 6.95 0|M12 20h.01",
  "wifi-off": "M1 1l22 22|M16.72 11.06A10.94 10.94 0 0 1 19 12.55|M5 12.55a10.94 10.94 0 0 1 5.17-2.39|M10.71 5.05A16 16 0 0 1 22.58 9|M1.42 9a15.91 15.91 0 0 1 4.7-2.88|M8.53 16.11a6 6 0 0 1 6.95 0|M12 20h.01",
  zap: "M13 2L3 14h9l-1 8 10-12h-9l1-8z",
  power: "M18.36 6.64a9 9 0 1 1-12.73 0|M12 2v10",
  ban: "M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636",

  // Social & Contact
  lock: "M12 15v2m-6 4h12a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2zm10-10V7a4 4 0 0 0-8 0v4h8z",
  mail: "M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z|M22 6l-10 7L2 6",
  handshake: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2|M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8|M23 21v-2a4 4 0 0 0-3-3.87|M16 3.13a4 4 0 0 1 0 7.75",
  briefcase: "M4 7h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2z|M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",
  linkedin: "M4 2a2 2 0 1 0 0.001 0z|M2 9h4v12H2z|M10 9h4v2a4 4 0 0 1 8 0v10h-4v-8a2 2 0 0 0-4 0v8h-4z",
  instagram: "M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5z|M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z|M17.5 6.5h.01",
  "message-square": "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",
  lightbulb: "M9 18h6|M10 22h4|M12 2a7 7 0 0 0-4 12c.5.5 1 1.5 1 2.5V18h6v-1.5c0-1 .5-2 1-2.5A7 7 0 0 0 12 2z",

  // Feature / Decorative
  rocket: "M5 13c0 3 2 6 2 6s3-2 6-2l4-4c2-2 3-5 2-8-3-1-6 0-8 2l-4 4c0 3-2 6-2 6z|M15 9h.01|M9 21l-2 2|M3 15l-2 2",
  target: "M12 2v4|M12 18v4|M4.93 4.93l2.83 2.83|M16.24 16.24l2.83 2.83|M2 12h4|M18 12h4|M4.93 19.07l2.83-2.83|M16.24 7.76l2.83-2.83|M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8",
  sparkles: "M12 3l2.1 6.3L20 12l-5.9 2.7L12 21l-2.1-6.3L4 12l5.9-2.7z",
  egg: "M12 22c4 0 7-4 7-10 0-4-3-8-7-8s-7 4-7 8c0 6 3 10 7 10z",

  // Misc
  link: "M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71|M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",
  "link-off": "M16.88 3.549a5 5 0 0 1 1.414 7.07l-1.72 1.72|M8 12l2 2|M12 8l-2-2|M7.12 20.45a5 5 0 0 1-1.414-7.07l1.72-1.72|M4 4l16 16",
  "bar-chart-2": "M18 20V10|M12 20V4|M6 20v-6",
  package: "M16.5 9.4l-9-5.19|M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z|M3.27 6.96L12 12.01l8.73-5.05|M12 22.08V12",
  circle: "M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z",
} as const;

type IconName = keyof typeof icons;

const emojiAliases: Record<string, IconName> = {
  "\u{1F680}": "rocket",
  "\u{1F4CB}": "layout-grid",
  "\u{1F4B3}": "credit-card",
  "\u{1F517}": "link",
  "\u{1F4AC}": "message-square",
  "\u{1F3AF}": "target",
  "\u{1F4DD}": "file-text",
  "\u{1F4B0}": "coins",
  "\u{1F4A1}": "lightbulb",
  "\u{2709}\u{FE0F}": "mail",
  "\u{2709}": "mail",
  "\u{1F4E7}": "mail",
  "\u{1F91D}": "handshake",
  "\u{1F4BC}": "briefcase",
  "\u{1F512}": "lock",
  "\u{1F389}": "sparkles",
  "\u{1F95A}": "egg",
  "\u{2728}": "sparkles",
  "\u{26A1}": "zap",
  "\u{1F525}": "zap",
  "\u{1F48E}": "sparkles",
};

function resolveIconName(value: string): IconName {
  const normalized = (emojiAliases[value] ?? value) as string;
  return normalized in icons ? (normalized as IconName) : "circle";
}

const {
  name,
  size = 20,
  class: className = "",
  strokeWidth = 2,
  ariaLabel,
} = Astro.props;
const iconName = resolveIconName(name);
const paths = icons[iconName].split("|");
const sizeStr = typeof size === "number" ? `${size}px` : size;
---

<svg
  class={`shrink-0 ${className}`.trim()}
  width={sizeStr}
  height={sizeStr}
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width={strokeWidth}
  stroke-linecap="round"
  stroke-linejoin="round"
  role={ariaLabel ? "img" : undefined}
  aria-label={ariaLabel}
  aria-hidden={ariaLabel ? undefined : "true"}
>
  {paths.map((d) => <path d={d} />)}
</svg>
