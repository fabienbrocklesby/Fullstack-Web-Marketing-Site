---
/**
 * Customer Dashboard - Stage 6A Redesign
 *
 * Overview Tab (default): Guided "Next action" hero with state-dependent CTA
 * Advanced Tab: Device management, air-gapped device activation tools
 *
 * Components are extracted to src/components/customer/dashboard/
 * Client-side JS is modularized in src/lib/customer/dashboard/
 */
import PortalLayout from "../../layouts/PortalLayout.astro";
import HeroSection from "../../components/customer/dashboard/HeroSection.astro";
import PlansCard from "../../components/customer/dashboard/PlansCard.astro";
import DevicesCard from "../../components/customer/dashboard/DevicesCard.astro";
import AdvancedDevicesTable from "../../components/customer/dashboard/AdvancedDevicesTable.astro";
import AirGappedSection from "../../components/customer/dashboard/AirGappedSection.astro";
import DashboardModals from "../../components/customer/dashboard/DashboardModals.astro";
---

<PortalLayout title="Dashboard - Light Lane" activeTab="dashboard">
  <!-- Overview / Advanced Tabs -->
  <div role="tablist" class="tabs tabs-lift mb-6">
    <button
      role="tab"
      class="tab tab-active"
      id="tab-overview"
      aria-controls="panel-overview"
    >
      Overview
    </button>
    <button
      role="tab"
      class="tab"
      id="tab-advanced"
      aria-controls="panel-advanced"
    >
      Advanced
    </button>
  </div>

  <!-- ========== OVERVIEW TAB ========== -->
  <div id="panel-overview" role="tabpanel" class="space-y-6">
    <HeroSection />
    <PlansCard />
    <DevicesCard />
  </div>

  <!-- ========== ADVANCED TAB ========== -->
  <div id="panel-advanced" role="tabpanel" class="hidden space-y-6">
    <AdvancedDevicesTable />
    <AirGappedSection />
  </div>

  <!-- ========== MODALS ========== -->
  <DashboardModals />
</PortalLayout>

<script>
  import { initCustomerDashboard } from "../../lib/customer/dashboard";

  // Initialize dashboard when DOM is ready
  initCustomerDashboard();
</script>
