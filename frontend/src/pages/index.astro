---
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
import EasterEgg from "../components/EasterEgg.astro";
import DownloadButtons from "../components/DownloadButtons.astro";
import { pricingOffers } from "../data/pricing";
import { homepageFaq } from "../data/faq";
import { getSaleBadgeText, getHeroPricingNote } from "../utils/sale-dates";

const saleBadgeText = getSaleBadgeText();
const heroPricingNote = getHeroPricingNote();

const fallbackSite = new URL("https://lightlane.app");
const siteBase = Astro.site ?? fallbackSite;
const toAbsolute = (path: string) => new URL(path, siteBase).href;

const homepageKeywords = [
  "AI laser engraving software",
  "AI-powered laser cutter software",
  "laser engraving workflow automation",
  "AI image prep for laser engraving",
  "smart laser engraving settings",
  "best AI laser engraving software",
  "Lightlane AI laser engraving",
];

const workflowSteps = [
  {
    id: "workflow-step-1",
    anchor: "/#workflow-step-1",
    name: "Import Your Design",
    description:
      "Drop in SVGs, images, or design files. Lightlane normalizes layers and paths so you can get straight to work.",
    video: "/landing/drag&drop.mp4",
  },
  {
    id: "workflow-step-2",
    anchor: "/#workflow-step-2",
    name: "Set Up Your Job",
    description:
      "Choose your material and tweak power, speed, and passes. Use built-in presets or dial in your own settings.",
    video: "/landing/materials.mp4",
  },
  {
    id: "workflow-step-3",
    anchor: "/#workflow-step-3",
    name: "Preview & Run",
    description:
      "See exactly what will engrave before you fire. Stream directly to G-code, GRBL, or Ruida controllers.",
    video: "/landing/preview.mp4",
  },
];

const offerSchemas = pricingOffers.map((offer) => {
  const base: Record<string, unknown> = {
    "@type": "Offer",
    priceCurrency: offer.priceCurrency,
    availability: offer.availability,
    url: toAbsolute(offer.ctaPath),
    name: offer.schemaName,
    description: offer.description,
    category: "Software",
  };

  if (offer.sku) base.sku = offer.sku;
  if (typeof offer.monthlyPrice === "number") {
    base.price = offer.monthlyPrice;
    base.billingIncrement = 1;
    base.billingDuration = "P1M";
  } else {
    base.priceType = "https://schema.org/CallForPrice";
  }

  return base;
});

// FAQ entries imported from shared data/faq.ts for site-wide consistency
const faqEntries = homepageFaq;

const howToSchema = {
  "@context": "https://schema.org",
  "@type": "HowTo",
  "@id": `${toAbsolute("/")}#laser-engraving-workflow`,
  name: "How to engrave with Lightlane laser engraving software",
  description:
    "Import your design, set up your job with material presets, preview the result, and stream to your laser. Supports G-code, GRBL, and Ruida controllers.",
  image: toAbsolute("/landing/basicscreen.png"),
  totalTime: "PT3M",
  tool: [
    {
      "@type": "HowToTool",
      name: "Lightlane laser engraving software",
    },
  ],
  supply: [
    {
      "@type": "HowToSupply",
      name: "Laser cutter with Ruida, GRBL, or G-code controller",
    },
    {
      "@type": "HowToSupply",
      name: "Material presets or saved Lightlane templates",
    },
  ],
  step: workflowSteps.map((step, index) => ({
    "@type": "HowToStep",
    position: index + 1,
    name: step.name,
    text: step.description,
    url: toAbsolute(step.anchor),
  })),
};

const videoStructuredData = workflowSteps.map((step) => ({
  "@context": "https://schema.org",
  "@type": "VideoObject",
  "@id": `${toAbsolute("/")}#${step.id}-video`,
  name: `${step.name} - Lightlane laser engraving software`,
  description: step.description,
  thumbnailUrl: [toAbsolute("/NotRoundedLogo.png")],
  uploadDate: new Date().toISOString().slice(0, 10),
  contentUrl: toAbsolute(step.video),
  inLanguage: "en-US",
  publisher: { "@id": `${toAbsolute("/")}#organization` },
}));

const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "@id": `${toAbsolute("/")}#lightlane-software`,
    name: "Lightlane",
    description:
      "AI-powered laser engraving software: drop an image, tell AI your material and goal, get optimized settings and engrave. Smart, fast, pro-grade.",
    applicationCategory: "DesignApplication",
    operatingSystem: ["Windows", "macOS"],
    softwareRequirements: "Ruida, GRBL/G-code compatible laser engravers",
    downloadUrl: toAbsolute("/pricing"),
    image: [
      toAbsolute("/NotRoundedLogo.png"),
      toAbsolute("/landing/basicscreen.png"),
    ],
    publisher: { "@id": `${toAbsolute("/")}#organization` },
    offers: offerSchemas,
    keywords: homepageKeywords.join(", "),
  },
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "@id": `${toAbsolute("/")}#lightlane-product`,
    name: "Lightlane AI Laser Engraving Software",
    description:
      "AI-powered laser engraving software that handles image prep, suggests optimal settings, and streams to your machine. Full manual control when you want it.",
    brand: {
      "@type": "Brand",
      name: "Lightlane",
      logo: toAbsolute("/LogoHorizontal.webp"),
    },
    category: "Software",
    image: [
      toAbsolute("/NotRoundedLogo.png"),
      toAbsolute("/landing/basicscreen.png"),
    ],
    audience: {
      "@type": "Audience",
      audienceType: [
        "Laser engraver operators",
        "Fabrication studios",
        "Product designers",
        "Makers",
      ],
    },
    offers: offerSchemas,
    keywords: homepageKeywords.join(", "),
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "@id": `${toAbsolute("/")}#lightlane-faq`,
    mainEntity: faqEntries.map((faq) => ({
      "@type": "Question",
      name: faq.question,
      acceptedAnswer: {
        "@type": "Answer",
        text: faq.answer,
      },
    })),
  },
  howToSchema,
  ...videoStructuredData,
];
---

<Layout
  title="Lightlane - AI-Powered Laser Engraving Software"
  description="AI laser engraving software: drop an image, choose your material, let AI prep and suggest settings, then engrave. Full manual control when you need it."
  keywords={homepageKeywords.join(", ")}
  structuredData={structuredData}
>
  <!-- Header rendered by Layout.astro -->

  <main>
    <section
      class="relative overflow-hidden flex items-center pt-20 md:pt-24 pb-12 md:pb-16"
    >
      <!-- Gradient background -->
      <div
        class="absolute inset-0 bg-[radial-gradient(circle_at_20%_30%,rgba(42,158,219,0.2),transparent_60%)]"
        aria-hidden="true"
      >
      </div>
      <!-- Subtle grid overlay -->
      <div
        class="absolute inset-0 opacity-[0.08] pointer-events-none"
        style="background-image: repeating-linear-gradient(0deg, transparent, transparent 49px, currentColor 49px, currentColor 50px), repeating-linear-gradient(90deg, transparent, transparent 49px, currentColor 49px, currentColor 50px);"
        aria-hidden="true"
      >
      </div>

      <div class="container relative z-[2]">
        <div class="max-w-3xl mx-auto text-center space-y-6">
          <div class="flex justify-center">
            <div class="badge badge-success badge-soft badge-xl tracking-wide">
              {saleBadgeText}
            </div>
          </div>
          <h1 class="text-5xl md:text-6xl font-extrabold leading-tight">
            <span class="text-ll-gradient"
              >AI-powered laser engraving software</span
            >
          </h1>
          <p class="text-lg md:text-xl text-base-content/80">
            Drop in an image, choose your material and finish goal, and let AI
            handle image prep and suggest optimal settings. Preview, tweak if
            you want, then stream to your laser. Full manual control always
            available.
          </p>
          <p class="text-sm text-base-content/70">
            G-code & GRBL fully supported. Ruida in Pro (early alpha). K40 on
            roadmap.
          </p>
          <div class="flex justify-center">
            <div
              class="alert alert-info shadow-sm text-sm max-w-xl mx-auto bg-base-100/80 text-base-content"
            >
              <span class="font-semibold">14-day free trial:</span>
              Full access to AI features, all controllers, no credit card required.
            </div>
          </div>
          <div class="flex gap-4 justify-center">
            <a
              href="#download-app"
              class="btn btn-gradient"
              data-download-modal-trigger>Start Free Trial</a
            >
            <a href="#workflow" class="btn btn-outline">How It Works</a>
          </div>

          <div id="download-app" class="space-y-3">
            <DownloadButtons align="center" />
            <p class="text-sm text-base-content/70">
              macOS & Windows. Your 14-day trial starts when you create a free
              account.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="section pt-0">
      <div class="container grid gap-12 lg:grid-cols-2 items-center">
        <div class="space-y-6 order-2 lg:order-1" data-animate>
          <h2 class="text-3xl md:text-4xl font-bold text-ll-gradient">
            Stop wrestling with image prep and settings
          </h2>
          <ul class="space-y-4 text-base-content/70 text-sm leading-relaxed">
            <li class="flex gap-3">
              <span class="text-accent">•</span><span
                >Manually removing backgrounds and adjusting contrast for every
                image wastes time.</span
              >
            </li>
            <li class="flex gap-3">
              <span class="text-accent">•</span><span
                >Guessing power and speed settings leads to wasted material and
                failed jobs.</span
              >
            </li>
            <li class="flex gap-3">
              <span class="text-accent">•</span><span
                >Jumping between apps for image editing and engraving breaks
                your flow.</span
              >
            </li>
            <li class="flex gap-3">
              <span class="text-accent">•</span><span
                >Most tools offer no help—just endless menus and
                trial-and-error.</span
              >
            </li>
          </ul>
          <p class="text-base-content/80 text-sm">
            Lightlane's AI Assistant tunes images and suggests settings for your
            material and laser. You stay in control—override anything, anytime.
          </p>
          <div class="flex flex-wrap gap-4">
            <a
              href="#download-app"
              class="btn btn-gradient"
              data-download-modal-trigger>Start Free Trial</a
            >
            <a href="#workflow" class="btn btn-outline">How It Works</a>
          </div>
        </div>
        <div class="order-1 lg:order-2 relative overflow-visible" data-animate>
          <div
            class="mockup-window border border-base-300 w-full bg-base-200/40 rounded-2xl overflow-hidden"
          >
            <div class="border-t border-base-300 bg-base-100 overflow-hidden">
              <img
                src="/landing/basicscreen.png"
                alt="Lightlane basic engraving workspace screen"
                loading="eager"
                width={1920}
                height={1027}
                class="w-full h-auto block"
              />
            </div>
          </div>
          <!-- Radial glow orb adjusted to sit fully inside container (avoids bottom being cut off) -->
          <div
            class="pointer-events-none absolute bottom-0 left-0 -translate-x-1/4 translate-y-1/4 w-40 h-40 rounded-full opacity-35 blur-2xl bg-[radial-gradient(circle_at_center,rgba(24,72,168,0.8)_0%,rgba(42,158,219,0.45)_55%,transparent_75%)]"
          >
          </div>
        </div>
      </div>
    </section>

    <section id="workflow" class="section bg-base-200/40">
      <div class="container">
        <div class="page-header" data-animate>
          <h2 class="text-3xl md:text-4xl font-bold text-ll-gradient">
            How it works
          </h2>
          <p class="mt-4 text-base-content/70 max-w-2xl mx-auto">
            From design file to finished engrave in a streamlined workflow.
          </p>
        </div>
        <div id="workflow-scrollytell" class="relative max-w-5xl mx-auto">
          <!-- Sticky stage -->
          <div class="sticky top-24 md:top-28">
            <ol id="workflow-steps" class="relative h-[70vh] md:h-[65vh]">
              <li
                id="workflow-step-1"
                data-step="0"
                class="workflow-step absolute inset-0 opacity-0 pointer-events-none transition duration-700 ease-out"
              >
                <div class="grid md:grid-cols-2 gap-8 items-center h-full">
                  <div
                    class="aspect-video rounded-xl bg-base-300 overflow-hidden ring-1 ring-base-300/60 shadow-sm relative shadow-lg/30"
                  >
                    <video
                      data-autoplay
                      data-src="/landing/drag&drop.mp4"
                      class="w-full h-full object-cover"
                      muted
                      loop
                      playsinline
                      preload="metadata"
                      aria-hidden="true"
                      tabindex="-1"
                      role="presentation"
                    >
                      Your browser does not support the video tag.
                    </video>
                    <div
                      class="pointer-events-none absolute inset-0 bg-gradient-to-tr from-base-300/20 to-transparent"
                    >
                    </div>
                  </div>
                  <div class="space-y-3">
                    <h3 class="text-xl font-semibold">Import Your Design</h3>
                    <p class="text-sm text-base-content/70">
                      Drop in SVGs, images, or design files. Lightlane
                      normalizes layers and paths so you can get straight to
                      work.
                    </p>
                  </div>
                </div>
              </li>
              <li
                id="workflow-step-2"
                data-step="1"
                class="workflow-step absolute inset-0 opacity-0 pointer-events-none transition duration-700 ease-out"
              >
                <div class="grid md:grid-cols-2 gap-8 items-center h-full">
                  <div
                    class="order-2 md:order-1 aspect-video rounded-xl bg-base-300 overflow-hidden ring-1 ring-base-300/60 shadow-sm relative shadow-lg/30"
                  >
                    <video
                      data-autoplay
                      data-src="/landing/preview.mp4"
                      class="w-full h-full object-cover"
                      muted
                      loop
                      playsinline
                      preload="metadata"
                      aria-hidden="true"
                      tabindex="-1"
                      role="presentation"
                    >
                      Your browser does not support the video tag.
                    </video>
                    <div
                      class="pointer-events-none absolute inset-0 bg-gradient-to-tr from-base-300/20 to-transparent"
                    >
                    </div>
                  </div>
                  <div class="space-y-3 order-1 md:order-2">
                    <h3 class="text-xl font-semibold">Set Up Your Job</h3>
                    <p class="text-sm text-base-content/70">
                      Choose your material and tweak power, speed, and passes.
                      Use built-in presets or dial in your own settings.
                    </p>
                  </div>
                </div>
              </li>
              <li
                id="workflow-step-3"
                data-step="2"
                class="workflow-step absolute inset-0 opacity-0 pointer-events-none transition duration-700 ease-out"
              >
                <div class="grid md:grid-cols-2 gap-8 items-center h-full">
                  <div
                    class="aspect-video rounded-xl bg-base-300 overflow-hidden ring-1 ring-base-300/60 shadow-sm relative shadow-lg/30"
                  >
                    <video
                      data-autoplay
                      data-src="/landing/materials.mp4"
                      class="w-full h-full object-cover"
                      muted
                      loop
                      playsinline
                      preload="metadata"
                      aria-hidden="true"
                      tabindex="-1"
                      role="presentation"
                    >
                      Your browser does not support the video tag.
                    </video>
                    <div
                      class="pointer-events-none absolute inset-0 bg-gradient-to-tr from-base-300/20 to-transparent"
                    >
                    </div>
                  </div>
                  <div class="space-y-3">
                    <h3 class="text-xl font-semibold">Preview & Run</h3>
                    <p class="text-sm text-base-content/70">
                      See exactly what will engrave before you fire. Stream
                      directly to G-code, GRBL, or Ruida controllers.
                    </p>
                  </div>
                </div>
              </li>
              <li
                id="workflow-step-4"
                data-step="3"
                class="workflow-step absolute inset-0 opacity-0 pointer-events-none transition duration-700 ease-out"
              >
                <div class="grid md:grid-cols-2 gap-8 items-center h-full">
                  <div
                    class="order-2 md:order-1 aspect-video rounded-xl bg-base-300 overflow-hidden ring-1 ring-base-300/60 shadow-sm relative shadow-lg/30"
                  >
                    <video
                      data-autoplay
                      data-src="/landing/stream.mp4"
                      class="w-full h-full object-cover"
                      muted
                      loop
                      playsinline
                      preload="metadata"
                      aria-hidden="true"
                      tabindex="-1"
                      role="presentation"
                    >
                      Your browser does not support the video tag.
                    </video>
                    <div
                      class="pointer-events-none absolute inset-0 bg-gradient-to-tr from-base-300/20 to-transparent"
                    >
                    </div>
                  </div>
                  <div class="space-y-3 order-1 md:order-2">
                    <h3 class="text-xl font-semibold">Stream to Your Laser</h3>
                    <p class="text-sm text-base-content/70">
                      Send jobs directly to your machine over USB or network.
                      Packaged G-code bundles available for offline use.
                    </p>
                  </div>
                </div>
              </li>
              <li
                id="workflow-step-5"
                data-step="4"
                class="workflow-step absolute inset-0 opacity-0 pointer-events-none transition duration-700 ease-out"
              >
                <div class="grid md:grid-cols-2 gap-8 items-center h-full">
                  <div
                    class="aspect-video rounded-xl bg-base-300 overflow-hidden ring-1 ring-base-300/60 shadow-sm relative shadow-lg/30"
                  >
                    <video
                      data-autoplay
                      data-src="/landing/templates.mp4"
                      class="w-full h-full object-cover"
                      muted
                      loop
                      playsinline
                      preload="metadata"
                      aria-hidden="true"
                      tabindex="-1"
                      role="presentation"
                    >
                      Your browser does not support the video tag.
                    </video>
                    <div
                      class="pointer-events-none absolute inset-0 bg-gradient-to-tr from-base-300/20 to-transparent"
                    >
                    </div>
                  </div>
                  <div class="space-y-3">
                    <h3 class="text-xl font-semibold">Save & Reuse</h3>
                    <p class="text-sm text-base-content/70">
                      Capture your settings as reusable templates. Load them
                      later to repeat successful jobs with one click.
                    </p>
                  </div>
                </div>
              </li>
            </ol>
          </div>
          <!-- Dynamic spacer height set via JS to drive scroll -->
          <div id="workflow-spacer" aria-hidden="true"></div>
        </div>
        <div class="mt-12 flex justify-center" data-animate>
          <div
            class="alert alert-info bg-base-100/80 border border-info/30 flex flex-col gap-3 sm:flex-row sm:items-center max-w-2xl"
          >
            <div>
              <span class="font-semibold">Full manual control:</span>
              Every setting is yours to tweak. Presets are a starting point, not
              a limitation.
            </div>
            <a
              href="#download-app"
              class="btn btn-info btn-sm"
              data-download-modal-trigger>Start Free Trial</a
            >
          </div>
        </div>
      </div>
    </section>

    <section id="faq" class="section scroll-mt-28 md:scroll-mt-40">
      <div class="container grid gap-8 lg:grid-cols-3">
        <div class="lg:col-span-2 space-y-8" data-animate>
          <h2 class="text-3xl md:text-4xl font-bold text-ll-gradient">
            AI Assistant <span
              class="badge badge-secondary badge-sm align-middle">Pro</span
            >
          </h2>
          <p class="text-base-content/70 max-w-xl">
            Tell the assistant what you want: <em
              >"Engrave this on walnut with my Ortur, dark and contrasty."</em
            > It adjusts the image and suggests settings to match.
          </p>
          <div class="grid md:grid-cols-3 gap-6">
            <!-- AI Image Tuning -->
            <div
              class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
            >
              <div
                class="w-10 h-10 rounded-lg bg-gradient-to-br from-primary/30 to-primary/5 flex items-center justify-center"
              >
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-primary"
                >
                  <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                  <circle cx="9" cy="9" r="2"></circle>
                  <path d="M21 15l-5-5L5 21"></path>
                </svg>
              </div>
              <h3 class="font-semibold">Image Tuning for Engraving</h3>
              <p class="text-sm text-base-content/70">
                AI adjusts contrast, tone, and color balance specifically for
                how lasers interact with materials.
              </p>
            </div>
            <!-- AI Settings Suggestions -->
            <div
              class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
            >
              <div
                class="w-10 h-10 rounded-lg bg-gradient-to-br from-secondary/30 to-secondary/5 flex items-center justify-center"
              >
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-secondary"
                >
                  <path
                    d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"
                  ></path>
                </svg>
              </div>
              <h3 class="font-semibold">Smart Settings Suggestions</h3>
              <p class="text-sm text-base-content/70">
                Describe your material and desired look. AI recommends power,
                speed, and passes as a starting point.
              </p>
            </div>
            <!-- Preview Before Cutting -->
            <div
              class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
            >
              <div
                class="w-10 h-10 rounded-lg bg-gradient-to-br from-accent/30 to-accent/5 flex items-center justify-center"
              >
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-accent"
                >
                  <circle cx="12" cy="12" r="3"></circle><path
                    d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12Z"></path>
                </svg>
              </div>
              <h3 class="font-semibold">Real-Time Preview</h3>
              <p class="text-sm text-base-content/70">
                See exactly what will engrave before firing. Verify paths, catch
                issues, adjust on the fly.
              </p>
            </div>
            <!-- Full Manual Control -->
            <div
              class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
            >
              <div
                class="w-10 h-10 rounded-lg bg-gradient-to-br from-info/30 to-info/5 flex items-center justify-center"
              >
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-info"
                >
                  <path
                    d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                  ></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </div>
              <h3 class="font-semibold">Full Manual Control</h3>
              <p class="text-sm text-base-content/70">
                AI suggests, you decide. Override any parameter—power, speed,
                passes, layers. Always in control.
              </p>
            </div>
            <!-- Materials DB -->
            <div
              class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
            >
              <div
                class="w-10 h-10 rounded-lg bg-gradient-to-br from-success/30 to-success/5 flex items-center justify-center"
              >
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-success"
                >
                  <circle cx="8" cy="8" r="3"></circle><circle
                    cx="16"
                    cy="16"
                    r="3"></circle>
                  <path d="M6 21c0-2.8 2.2-5 5-5h2"></path><path d="M12 8h4l2 2"
                  ></path>
                </svg>
              </div>
              <h3 class="font-semibold">Materials Database</h3>
              <p class="text-sm text-base-content/70">
                AI draws from curated presets per material. Power, speed,
                passes—all tuned for real-world results.
              </p>
            </div>
            <!-- Material Test Grid -->
            <div
              class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
            >
              <div
                class="w-10 h-10 rounded-lg bg-gradient-to-br from-warning/30 to-warning/5 flex items-center justify-center"
              >
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-warning"
                >
                  <rect x="3" y="3" width="7" height="7"></rect>
                  <rect x="14" y="3" width="7" height="7"></rect>
                  <rect x="14" y="14" width="7" height="7"></rect>
                  <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
              </div>
              <h3 class="font-semibold">Material Test Grid</h3>
              <p class="text-sm text-base-content/70">
                Generate a grid of power/speed tests in one click. Find what
                works best on a new material, fast.
              </p>
            </div>
          </div>
          <div
            class="alert alert-success bg-base-100/80 border border-success/20 text-sm"
          >
            <span class="font-semibold">Free trial included:</span>
            Every download starts with the same pro build you’ll use in production,
            so you can validate workflows before committing.
          </div>
          <div class="flex gap-4">
            <a
              href="#download-app"
              class="btn btn-gradient"
              data-download-modal-trigger>Start Free Trial</a
            >
            <a href="/pricing" class="btn btn-outline">See Plans</a>
          </div>
        </div>
        <div class="space-y-8" data-animate>
          <h2 class="text-xl font-semibold">Controller Support</h2>
          <p class="text-sm text-base-content/70 max-w-sm">
            G-code and GRBL controllers are fully supported. Ruida support is
            included in Pro as early alpha. K40 / M2-Nano is on the roadmap.
          </p>
          <div class="grid grid-cols-2 gap-4 max-w-xs">
            <!-- macOS card -->
            <div
              class="p-4 rounded-xl bg-base-200 border border-base-300 flex flex-col items-center gap-3 text-center"
            >
              <div
                class="w-12 h-12 rounded-lg bg-gradient-to-br from-base-100/60 to-base-300/20 flex items-center justify-center"
              >
                <svg
                  viewBox="0 0 24 24"
                  width="30"
                  height="30"
                  fill="currentColor"
                  class="text-base-content/80"
                >
                  <path
                    d="M17.25 13.2c-.03-2.2 1.8-3.26 1.89-3.32-1.03-1.5-2.63-1.7-3.19-1.72-1.36-.14-2.65.8-3.34.8-.7 0-1.75-.78-2.88-.76-1.47.02-2.83.86-3.59 2.2-1.53 2.66-.39 6.58 1.09 8.73.72 1.04 1.58 2.2 2.71 2.16 1.09-.04 1.5-.7 2.82-.7 1.33 0 1.69.7 2.87.67 1.19-.02 1.94-1.06 2.66-2.11.84-1.22 1.19-2.4 1.21-2.46-.03-.01-2.31-.89-2.34-3.39Z"
                  ></path>
                  <path
                    d="M15.52 6.54c.59-.72.99-1.7.88-2.69-.85.03-1.88.56-2.49 1.28-.54.63-1.02 1.64-.9 2.6.95.07 1.92-.49 2.51-1.19Z"
                  ></path>
                </svg>
              </div>
              <div>
                <p class="text-sm font-medium">macOS</p>
                <p class="text-[11px] text-base-content/60">
                  Universal / Apple&nbsp;Silicon
                </p>
              </div>
            </div>
            <!-- Windows card -->
            <div
              class="p-4 rounded-xl bg-base-200 border border-base-300 flex flex-col items-center gap-3 text-center"
            >
              <div
                class="w-12 h-12 rounded-lg bg-gradient-to-br from-base-100/60 to-base-300/20 flex items-center justify-center"
              >
                <svg
                  viewBox="0 0 22 22"
                  width="30"
                  height="30"
                  fill="currentColor"
                  class="text-base-content/80"
                >
                  <path
                    d="M0 2.5v7.6h10.5V2.5H0zm11.5 0v7.6H22V2.5H11.5zM0 11.9v7.6h10.5v-7.6H0zm11.5 0v7.6H22v-7.6H11.5z"
                  ></path>
                </svg>
              </div>
              <div>
                <p class="text-sm font-medium">Windows</p>
                <p class="text-[11px] text-base-content/60">
                  x64 / ARM in testing
                </p>
              </div>
            </div>
          </div>
          <ul class="text-xs text-base-content/60 space-y-1 pt-2">
            <li class="flex gap-2">
              <span class="text-success">•</span>G-code & GRBL fully supported
            </li>
            <li class="flex gap-2">
              <span class="text-warning">•</span>Ruida in Pro (early alpha)
            </li>
            <li class="flex gap-2">
              <span class="text-info">•</span>K40 / M2-Nano on roadmap
            </li>
            <li class="flex gap-2">
              <span class="text-success">•</span>Offline mode for air-gapped
              setups
            </li>
          </ul>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container max-w-4xl" data-animate>
        <div class="space-y-10">
          <div class="text-center space-y-4">
            <h2 class="text-3xl md:text-4xl font-bold text-ll-gradient">FAQ</h2>
            <p class="text-sm text-base-content/60 max-w-2xl mx-auto">
              What makers ask first about using Lightlane day-to-day.
            </p>
          </div>
          <div class="join join-vertical w-full" id="faq">
            {
              homepageFaq.map((faq, index) => (
                <div class="collapse collapse-arrow join-item border border-base-300 bg-base-200/40">
                  <input type="radio" name="faq-home" checked={index === 0} />
                  <div class="collapse-title text-sm font-semibold">
                    {faq.question}
                  </div>
                  <div class="collapse-content text-sm text-base-content/70 leading-relaxed">
                    {faq.answer}
                  </div>
                </div>
              ))
            }
          </div>
          <div class="pt-4 text-center">
            <a
              href="#download-app"
              class="btn btn-gradient btn-sm"
              data-download-modal-trigger>Start Free Trial</a
            >
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <div class="page-header">
          <h2 class="text-3xl md:text-4xl font-bold text-ll-gradient">
            Why makers choose Lightlane
          </h2>
          <p class="mt-4 text-base-content/70 max-w-2xl mx-auto">
            Pro tools that speed up your workflow. Full control when you need
            it.
          </p>
        </div>
        <div class="grid gap-8 md:grid-cols-3">
          <div class="card bg-base-200 border border-base-300">
            <div class="card-body">
              <h3 class="card-title">
                AI Assistant <span class="badge badge-secondary badge-xs"
                  >Pro</span>
              </h3>
              <p class="text-sm opacity-80">
                Describe your goal and let AI tune contrast, tone, and settings
                for the material and look you want.
              </p>
            </div>
          </div>
          <div class="card bg-base-200 border border-base-300">
            <div class="card-body">
              <h3 class="card-title">Smart Settings</h3>
              <p class="text-sm opacity-80">
                Select your material and finish goal. Get power, speed, and pass
                recommendations based on your machine profile.
              </p>
            </div>
          </div>
          <div class="card bg-base-200 border border-base-300">
            <div class="card-body">
              <h3 class="card-title">Full Manual Override</h3>
              <p class="text-sm opacity-80">
                AI suggestions are starting points, not mandates. Adjust any
                parameter. Save custom presets. You're always in charge.
              </p>
            </div>
          </div>
          <div class="card bg-base-200 border border-base-300">
            <div class="card-body">
              <h3 class="card-title">Real-Time Preview</h3>
              <p class="text-sm opacity-80">
                See exactly what will engrave before firing. Verify paths, catch
                problems, and iterate without wasting material.
              </p>
            </div>
          </div>
          <div class="card bg-base-200 border border-base-300">
            <div class="card-body">
              <h3 class="card-title">
                Material Test Grid <span class="badge badge-secondary badge-xs"
                  >Pro</span
                >
              </h3>
              <p class="text-sm opacity-80">
                Generate a grid of power/speed tests to quickly dial in settings
                for new materials. Repeatable results, less waste.
              </p>
            </div>
          </div>
          <div class="card bg-base-200 border border-base-300">
            <div class="card-body">
              <h3 class="card-title">G-code, GRBL & Ruida</h3>
              <p class="text-sm opacity-80">
                G-code and GRBL fully supported. Ruida available in Pro as early
                alpha. K40 on the roadmap.
              </p>
            </div>
          </div>
          <div class="card bg-base-200 border border-base-300">
            <div class="card-body">
              <h3 class="card-title">Offline Mode</h3>
              <p class="text-sm opacity-80">
                Works fully offline for air-gapped setups. No cloud dependency
                for day-to-day engraving work.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="container max-w-5xl" data-animate>
        <div class="page-header text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-ll-gradient">
            Built for real engraving workflows
          </h2>
          <p class="mt-4 text-base-content/70 max-w-2xl mx-auto">
            AI speeds up prep. Pro tools keep you in control. Results you can
            trust.
          </p>
        </div>
        <div class="grid gap-6 md:grid-cols-3">
          <!-- Benefit: Fewer Clicks -->
          <div
            class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-primary/30 to-primary/5 flex items-center justify-center"
            >
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-primary"
              >
                <path d="M4 4h6v6H4zM14 4h6v6h-6zM4 14h6v6H4z"></path>
                <path d="M14 14h6M14 18h6M14 22h6"></path>
              </svg>
            </div>
            <h3 class="font-semibold">Fewer Clicks</h3>
            <p class="text-sm text-base-content/70">
              Single, linear flow from drop to start. No modal maze-defaults
              auto-populate safe, material-aware parameters.
            </p>
          </div>
          <!-- Benefit: Instant Confidence -->
          <div
            class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-secondary/30 to-secondary/5 flex items-center justify-center"
            >
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-secondary"
              >
                <circle cx="12" cy="12" r="3"></circle><path
                  d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12Z"></path>
              </svg>
            </div>
            <h3 class="font-semibold">Instant Confidence</h3>
            <p class="text-sm text-base-content/70">
              Live preview + ordering overlays expose path order, passes &
              potential waste before a single pulse fires.
            </p>
          </div>
          <!-- Benefit: Cleaner Motion -->
          <div
            class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-accent/30 to-accent/5 flex items-center justify-center"
            >
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-accent"
              >
                <path d="M4 12c4-8 12-8 16 0"></path><path
                  d="M6 14c3-5 9-5 12 0"></path><path d="M10 18h4"></path>
              </svg>
            </div>
            <h3 class="font-semibold">Cleaner Motion</h3>
            <p class="text-sm text-base-content/70">
              Path optimiser reduces travel + sharp reversals-smoother edges,
              shorter runtimes, less mechanical wear.
            </p>
          </div>
          <!-- Benefit: Smart Parameters -->
          <div
            class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-info/30 to-info/5 flex items-center justify-center"
            >
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-info"
              >
                <path d="M5 4h9l5 5v11H5V4Z"></path><path
                  d="M9 12h6M9 16h6M9 8h2"></path>
              </svg>
            </div>
            <h3 class="font-semibold">Smart Parameters</h3>
            <p class="text-sm text-base-content/70">
              Material presets + guardrails auto adjust power & speed
              matrices-protecting detail and surface quality.
            </p>
          </div>
          <!-- Benefit: Offline First -->
          <div
            class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-success/30 to-success/5 flex items-center justify-center"
            >
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-success"
              >
                <path d="M4 5h16v10H4z"></path><path d="M8 21h8"></path><path
                  d="M10 17h4"></path>
              </svg>
            </div>
            <h3 class="font-semibold">Offline First</h3>
            <p class="text-sm text-base-content/70">
              Full functionality without the cloud: activation, templates,
              materials & streaming all work air-gapped.
            </p>
          </div>
          <!-- Benefit: Reuse & Scale -->
          <div
            class="p-6 rounded-xl bg-base-200 border border-base-300 space-y-3"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gradient-to-br from-warning/30 to-warning/5 flex items-center justify-center"
            >
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-warning"
              >
                <rect x="3" y="4" width="8" height="14" rx="2"></rect><rect
                  x="13"
                  y="6"
                  width="8"
                  height="12"
                  rx="2"></rect>
                <path d="M7 18v2M17 18v2"></path>
              </svg>
            </div>
            <h3 class="font-semibold">Reuse & Scale</h3>
            <p class="text-sm text-base-content/70">
              Templates, materials DB & consistent cross-platform builds let you
              duplicate winning setups instantly.
            </p>
          </div>
        </div>
        <div class="mt-10 flex flex-wrap gap-4 justify-center">
          <a
            href="#download-app"
            class="btn btn-gradient"
            data-download-modal-trigger>Start Free Trial</a
          >
          <a href="/pricing" class="btn btn-outline">View Tiers</a>
        </div>
      </div>
    </section>

    <section class="relative py-24">
      <div
        class="absolute inset-0 bg-gradient-to-r from-[#1848A8]/20 to-[#2A9EDB]/20 blur-3xl opacity-40"
      >
      </div>
      <div class="container relative text-center max-w-3xl">
        <h2 class="text-4xl md:text-5xl font-bold mb-6 text-ll-gradient pb-1">
          Engrave smarter. Ship faster.
        </h2>
        <p class="text-lg text-base-content/70 mb-8">
          Download Lightlane today and explore every Pro feature for 14 days,
          free. No credit card required. When you're ready, choose the plan that
          fits your workflow and keep your subscription running.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="#download-app"
            class="btn btn-gradient btn-lg"
            data-download-modal-trigger>Start Free Trial</a
          >
          <a href="/pricing" class="btn btn-outline btn-lg">See Plans</a>
        </div>
        <div class="mt-4 flex justify-center">
          <div class="badge badge-outline badge-lg gap-2">
            <span class="text-success">Free trial</span>Included with every
            download
          </div>
        </div>
      </div>
    </section>
  </main>
  <script>
    (function () {
      const revealOpts = { threshold: 0.12 };
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const el = entry.target as HTMLElement;
            el.style.opacity = "1";
            el.style.transform = "translateY(0)";
            el.style.willChange = "auto";
            observer.unobserve(el);
          }
        });
      }, revealOpts);
      document.querySelectorAll("[data-animate]").forEach((node) => {
        const el = node as HTMLElement;
        el.style.opacity = "0";
        el.style.transform = "translateY(18px)";
        el.style.transition = "opacity .7s ease, transform .7s ease";
        el.style.willChange = "opacity, transform";
        observer.observe(el);
      });
      function animateCount(el) {
        const target = Number(el.dataset.target || 0);
        let cur = 0;
        const dur = 1200;
        const start = performance.now();
        function step(ts) {
          const p = Math.min(1, (ts - start) / dur);
          cur = Math.floor(p * target);
          el.textContent = cur + (el.dataset.suffix || "");
          if (p < 1) requestAnimationFrame(step);
          else el.textContent = target + (el.dataset.suffix || "");
        }
        requestAnimationFrame(step);
      }
      document.querySelectorAll(".count-up").forEach(animateCount);

      // Autoplay workflow demo videos only when visible
      const vidObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            const v = entry.target as HTMLVideoElement;
            if (entry.isIntersecting) {
              // Lazy-assign src on first intersection
              const ds = v.getAttribute("data-src");
              if (ds && !v.getAttribute("src")) {
                v.setAttribute("src", ds);
              }
              // Attempt play; catch to avoid unhandled promise rejection on some browsers
              const p = v.play();
              if (p && typeof p.catch === "function") p.catch(() => {});
            } else {
              v.pause();
            }
          });
        },
        { threshold: 0.2 },
      );
      const autoVideos = Array.from(
        document.querySelectorAll("video[data-autoplay]"),
      ) as HTMLVideoElement[];
      autoVideos.forEach((el) => vidObserver.observe(el));

      // Scrollytelling workflow (one step visible at a time)
      const stepsContainer = document.getElementById("workflow-scrollytell");
      const steps = Array.from(
        document.querySelectorAll(".workflow-step"),
      ) as HTMLElement[];
      if (stepsContainer && steps.length) {
        // Provide scroll space: each step ~80vh extra to allow deliberate transition
        const spacer = document.getElementById("workflow-spacer");
        const perStep = 0.9 * window.innerHeight; // tune factor for feel
        if (spacer) {
          spacer.style.height = `${perStep * (steps.length - 1) + window.innerHeight * 0.2}px`;
        }
        // Prime first: explicitly activate to trigger video play
        setActive(0);

        function setActive(idx: number) {
          steps.forEach((s, i) => {
            if (i === idx) {
              if (!s.dataset.active) {
                s.dataset.active = "true";
                s.style.transition = "opacity .65s ease, transform .65s ease";
                s.style.opacity = "1";
                s.style.transform = "translateY(0)";
                s.style.pointerEvents = "auto";
                const vid = s.querySelector("video");
                if (vid) {
                  try {
                    (vid as HTMLVideoElement).play();
                  } catch (e) {}
                }
              }
            } else if (s.dataset.active) {
              delete s.dataset.active;
              s.style.opacity = "0";
              s.style.transform = "translateY(32px)";
              s.style.pointerEvents = "none";
              const vid = s.querySelector("video");
              if (vid) {
                (vid as HTMLVideoElement).pause();
              }
            }
          });
        }

        function onScroll() {
          if (!stepsContainer) return;
          const rect = stepsContainer.getBoundingClientRect();
          // progress across total scroll range (0 at top reach, 1 near end)
          const totalHeight = spacer?.offsetHeight || 0;
          const viewportH = window.innerHeight;
          const start = rect.top - viewportH * 0.15; // begin earlier for smoother entry
          const end = rect.bottom - viewportH * 0.85; // finish a bit earlier
          const rawP =
            (window.scrollY + viewportH * 0.5 - stepsContainer.offsetTop) /
            (totalHeight || 1);
          // Fallback simpler progress if calculations go weird
          const progress = Math.min(1, Math.max(0, rawP));
          const stepFloat = progress * (steps.length - 1);
          const idx = Math.round(stepFloat);
          setActive(idx);
        }
        window.addEventListener("scroll", onScroll, { passive: true });
        window.addEventListener("resize", () => {
          if (spacer) {
            spacer.style.height = `${perStep * (steps.length - 1) + window.innerHeight * 0.2}px`;
          }
        });
        // Initial call after layout
        setTimeout(onScroll, 50);
      }
    })();
  </script>

  <Footer />
  <EasterEgg />
</Layout>
