---
// License Portal - RETIRED (Stage 5.5 Cutover)
// This page previously provided MAC-based license activation for testing.
// All activation now uses the Stage 4/5 device-based system via the Customer Portal.
import Layout from "../layouts/Layout.astro";
import Icon from "../components/icons/Icon.astro";
---

<Layout
  title="License Portal - Retired"
  description="This activation portal has been retired. Please use the Customer Portal."
>
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
  </style>

  <main class="min-h-screen p-4 lg:p-8 flex items-center justify-center">
    <div class="container mx-auto max-w-2xl">
      <div class="card bg-base-100 shadow-2xl">
        <div class="card-body text-center">
          <div class="flex justify-center mb-4">
            <Icon name="lock" class="w-14 h-14 text-warning" ariaLabel="Lock" />
          </div>
          <h1 class="card-title text-3xl justify-center mb-4">
            License Portal Retired
          </h1>

          <div class="alert alert-warning mb-6">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="stroke-current shrink-0 h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
              ></path>
            </svg>
            <div>
              <p class="font-semibold">Stage 5.5 Cutover Complete</p>
              <p class="text-sm">
                Legacy MAC-based activation has been retired.
              </p>
            </div>
          </div>

          <p class="text-base-content/70 mb-6">
            This portal previously provided MAC-address based license activation
            for testing purposes. All license activation now uses the <strong
              >Stage 4/5 device-based entitlement system</strong
            >
            through the Customer Portal.
          </p>

          <div class="bg-base-200 rounded-lg p-4 mb-6 text-left">
            <h3 class="font-semibold mb-2">New Activation Flow:</h3>
            <ol
              class="list-decimal list-inside text-sm space-y-1 text-base-content/80"
            >
              <li>
                Log into the <a
                  href="/customer/dashboard"
                  class="link link-primary">Customer Portal</a>
              </li>
              <li>Register your device with a stable Device ID</li>
              <li>Activate your entitlement on the registered device</li>
              <li>For offline machines, use the Offline Refresh feature</li>
            </ol>
          </div>

          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/customer/dashboard" class="btn btn-primary">
              Go to Customer Portal
            </a>
            <a href="/customer/login" class="btn btn-outline">
              Customer Login
            </a>
          </div>

          <div class="divider">For Developers</div>

          <div class="text-sm text-base-content/60 text-left">
            <p class="mb-2">
              Legacy endpoints now return <code
                class="badge badge-error badge-sm">410 Gone</code
              >:
            </p>
            <ul class="list-disc list-inside space-y-1 font-mono text-xs">
              <li>POST /api/license/activate</li>
              <li>POST /api/license/deactivate</li>
              <li>POST /api/license-keys/:id/generate-activation-code</li>
              <li>POST /api/license-keys/:id/deactivate-with-code</li>
            </ul>
            <p class="mt-2">
              See the <a
                href="https://github.com/lightlane/main-website/blob/main/docs/licensing-portal-current-state.md"
                class="link link-primary">API documentation</a
              > for the Stage 4/5 endpoints.
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>
